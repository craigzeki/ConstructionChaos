\hypertarget{class_ragdoll}{}\doxysection{Ragdoll Class Reference}
\label{class_ragdoll}\index{Ragdoll@{Ragdoll}}


Base class for all \mbox{\hyperlink{class_ragdoll}{Ragdoll}} behaviour.  




Inheritance diagram for Ragdoll\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=348pt]{class_ragdoll__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for Ragdoll\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{class_ragdoll__coll__graph}
\end{center}
\end{figure}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{class_ragdoll_a386206900b13d3727f54d3df33dcfd17}{Reset\+Local\+Position}} ()
\item 
void \mbox{\hyperlink{class_ragdoll_a9c609d3fa00d9066e88237f21f598fc8}{On\+Collapse}} ((bool collapse, bool break\+Apart) collapse\+Info)
\begin{DoxyCompactList}\small\item\em Receives a broadcast message indicating the player has collapsed and sets the internal state accordingly. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Public Attributes}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{class_ragdoll_ae120b5caa1f4e32e2df5d94659660e47}\label{class_ragdoll_ae120b5caa1f4e32e2df5d94659660e47}} 
ulong {\bfseries Client\+Id}
\item 
\mbox{\Hypertarget{class_ragdoll_ac345af1e15c222b4abcb47090001eac5}\label{class_ragdoll_ac345af1e15c222b4abcb47090001eac5}} 
\mbox{\hyperlink{class_objective_action_reporter}{Objective\+Action\+Reporter}} {\bfseries Objective\+Action\+Reporter}
\item 
\mbox{\Hypertarget{class_ragdoll_acaaa2340a31b2cab040df748984d90dd}\label{class_ragdoll_acaaa2340a31b2cab040df748984d90dd}} 
\mbox{\hyperlink{class_character_input_handler}{Character\+Input\+Handler}} {\bfseries Character\+Input\+Handler}
\begin{DoxyCompactList}\small\item\em A reference to this characters input handler, usually found on the parent of the player character prefab. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{class_ragdoll_aa20102c2e3c74be6bd44d84503a5d663}\label{class_ragdoll_aa20102c2e3c74be6bd44d84503a5d663}} 
\mbox{\hyperlink{class_stick_movement}{Stick\+Movement}} {\bfseries Stick\+Movement}
\begin{DoxyCompactList}\small\item\em A reference to the top level movement controller -\/ used to initiate collapse from other body parts. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Protected Member Functions}
\begin{DoxyCompactItemize}
\item 
virtual void \mbox{\hyperlink{class_ragdoll_a110adc2ea8abf45aed55ed08aca51e4d}{Awake}} ()
\end{DoxyCompactItemize}
\doxysubsection*{Protected Attributes}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{class_ragdoll_acbe21edc246bbc1a07f9d7ad3aef7ed0}\label{class_ragdoll_acbe21edc246bbc1a07f9d7ad3aef7ed0}} 
bool {\bfseries \+\_\+is\+Active} = true
\begin{DoxyCompactList}\small\item\em Is the ragdoll \textquotesingle{}active\textquotesingle{} -\/ if not, it is collapsed. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{class_ragdoll_aa9d2d6547a221a337ae4e8ef24790021}\label{class_ragdoll_aa9d2d6547a221a337ae4e8ef24790021}} 
bool {\bfseries \+\_\+is\+Broken} = false
\begin{DoxyCompactList}\small\item\em Is the ragdoll \textquotesingle{}broken\textquotesingle{}. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Private Member Functions}
\begin{DoxyCompactItemize}
\item 
IEnumerator \mbox{\hyperlink{class_ragdoll_afb75c98fefedebe7ae85c8f47c8753c6}{Wait\+And\+Set\+Rotation}} ()
\begin{DoxyCompactList}\small\item\em Waits until the body part has moved back to its intended position, and then sets rotation.~\newline
 Avoids limbs attaching in rotations outside of their joint rotation limits. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Private Attributes}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{class_ragdoll_a739b0028aaa3a2cd0d42ba4ea3aef987}\label{class_ragdoll_a739b0028aaa3a2cd0d42ba4ea3aef987}} 
Hinge\+Joint2D {\bfseries \+\_\+hinge\+Joint}
\begin{DoxyCompactList}\small\item\em Reference to this game\+Object\textquotesingle{}s hinge joint. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{class_ragdoll_a29f73dbb34f22a17bb976a6ea49683a3}\label{class_ragdoll_a29f73dbb34f22a17bb976a6ea49683a3}} 
Quaternion {\bfseries \+\_\+initial\+Rotation}
\begin{DoxyCompactList}\small\item\em Used to store the correct (original) rotation of the body part. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{class_ragdoll_a2c2a578a2c3860da0c5cb072ae3ef2e4}\label{class_ragdoll_a2c2a578a2c3860da0c5cb072ae3ef2e4}} 
Vector3 {\bfseries \+\_\+origin\+Local\+Position}
\begin{DoxyCompactList}\small\item\em Used to store the correct (original) local position of the body part. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{class_ragdoll_a2b243db1bb8ea451633fe05eb896e8e4}\label{class_ragdoll_a2b243db1bb8ea451633fe05eb896e8e4}} 
Vector3 {\bfseries \+\_\+initial\+Local\+Position}
\begin{DoxyCompactList}\small\item\em Used to store the initial local position -\/ needed to reset player to centre of parent before moving during spawn. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{class_ragdoll_a0d117138c2f50150762b1b158b70715a}\label{class_ragdoll_a0d117138c2f50150762b1b158b70715a}} 
float {\bfseries \+\_\+rejoin\+Anchor\+Distance\+Threshold} = 0.\+005f
\begin{DoxyCompactList}\small\item\em Used to detect when the body part has returned to its original position. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Base class for all \mbox{\hyperlink{class_ragdoll}{Ragdoll}} behaviour. 

\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{class_ragdoll_a110adc2ea8abf45aed55ed08aca51e4d}\label{class_ragdoll_a110adc2ea8abf45aed55ed08aca51e4d}} 
\index{Ragdoll@{Ragdoll}!Awake@{Awake}}
\index{Awake@{Awake}!Ragdoll@{Ragdoll}}
\doxysubsubsection{\texorpdfstring{Awake()}{Awake()}}
{\footnotesize\ttfamily virtual void Ragdoll.\+Awake (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [virtual]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00066\ \ \ \ \ \{}
\DoxyCodeLine{00067\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_ragdoll_a2c2a578a2c3860da0c5cb072ae3ef2e4}{\_originLocalPosition}}\ =\ transform.position;}
\DoxyCodeLine{00068\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_ragdoll_a739b0028aaa3a2cd0d42ba4ea3aef987}{\_hingeJoint}}\ =\ GetComponent<HingeJoint2D>();}
\DoxyCodeLine{00069\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_ragdoll_a29f73dbb34f22a17bb976a6ea49683a3}{\_initialRotation}}\ =\ transform.rotation;}
\DoxyCodeLine{00070\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_ragdoll_a2b243db1bb8ea451633fe05eb896e8e4}{\_initialLocalPosition}}\ =\ transform.localPosition;}
\DoxyCodeLine{00071\ \ \ \ \ \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_ragdoll_a9c609d3fa00d9066e88237f21f598fc8}\label{class_ragdoll_a9c609d3fa00d9066e88237f21f598fc8}} 
\index{Ragdoll@{Ragdoll}!OnCollapse@{OnCollapse}}
\index{OnCollapse@{OnCollapse}!Ragdoll@{Ragdoll}}
\doxysubsubsection{\texorpdfstring{OnCollapse()}{OnCollapse()}}
{\footnotesize\ttfamily void Ragdoll.\+On\+Collapse (\begin{DoxyParamCaption}\item[{(bool collapse, bool break\+Apart)}]{collapse\+Info }\end{DoxyParamCaption})}



Receives a broadcast message indicating the player has collapsed and sets the internal state accordingly. 


\begin{DoxyParams}{Parameters}
{\em collapse} & True\+: collapsed False\+: restored from collapsed\\
\hline
\end{DoxyParams}


Call using Broadcast\+Message
\begin{DoxyCode}{0}
\DoxyCodeLine{00084\ \ \ \ \ \{}
\DoxyCodeLine{00085\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Original\ collapse}}
\DoxyCodeLine{00086\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_ragdoll_acbe21edc246bbc1a07f9d7ad3aef7ed0}{\_isActive}}\ =\ !collapseInfo.collapse;}
\DoxyCodeLine{00087\ }
\DoxyCodeLine{00088\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{class_ragdoll_a739b0028aaa3a2cd0d42ba4ea3aef987}{\_hingeJoint}}\ !=\ \textcolor{keyword}{null})}
\DoxyCodeLine{00089\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00090\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (collapseInfo.breakApart)}
\DoxyCodeLine{00091\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00092\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Disconnect\ joints\ and\ store\ previous\ connected\ rigidbody}}
\DoxyCodeLine{00093\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \_hingeJoint.enabled\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00094\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_ragdoll_aa9d2d6547a221a337ae4e8ef24790021}{\_isBroken}}\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00095\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00096\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00097\ }
\DoxyCodeLine{00098\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{class_ragdoll_aa9d2d6547a221a337ae4e8ef24790021}{\_isBroken}}\ \&\&\ !collapseInfo.collapse)}
\DoxyCodeLine{00099\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00100\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Reconnect\ joints}}
\DoxyCodeLine{00101\ \ \ \ \ \ \ \ \ \ \ \ \ StartCoroutine(\mbox{\hyperlink{class_ragdoll_afb75c98fefedebe7ae85c8f47c8753c6}{WaitAndSetRotation}}());}
\DoxyCodeLine{00102\ \ \ \ \ \ \ \ \ \ \ \ \ \_hingeJoint.enabled\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00103\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_ragdoll_aa9d2d6547a221a337ae4e8ef24790021}{\_isBroken}}\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00104\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00105\ \ \ \ \ \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_ragdoll_a386206900b13d3727f54d3df33dcfd17}\label{class_ragdoll_a386206900b13d3727f54d3df33dcfd17}} 
\index{Ragdoll@{Ragdoll}!ResetLocalPosition@{ResetLocalPosition}}
\index{ResetLocalPosition@{ResetLocalPosition}!Ragdoll@{Ragdoll}}
\doxysubsubsection{\texorpdfstring{ResetLocalPosition()}{ResetLocalPosition()}}
{\footnotesize\ttfamily void Ragdoll.\+Reset\+Local\+Position (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00074\ \ \ \ \ \{}
\DoxyCodeLine{00075\ \ \ \ \ \ \ \ \ transform.localPosition\ =\ \mbox{\hyperlink{class_ragdoll_a2b243db1bb8ea451633fe05eb896e8e4}{\_initialLocalPosition}};}
\DoxyCodeLine{00076\ \ \ \ \ \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_ragdoll_afb75c98fefedebe7ae85c8f47c8753c6}\label{class_ragdoll_afb75c98fefedebe7ae85c8f47c8753c6}} 
\index{Ragdoll@{Ragdoll}!WaitAndSetRotation@{WaitAndSetRotation}}
\index{WaitAndSetRotation@{WaitAndSetRotation}!Ragdoll@{Ragdoll}}
\doxysubsubsection{\texorpdfstring{WaitAndSetRotation()}{WaitAndSetRotation()}}
{\footnotesize\ttfamily IEnumerator Ragdoll.\+Wait\+And\+Set\+Rotation (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Waits until the body part has moved back to its intended position, and then sets rotation.~\newline
 Avoids limbs attaching in rotations outside of their joint rotation limits. 

\begin{DoxyReturn}{Returns}

\end{DoxyReturn}

\begin{DoxyCode}{0}
\DoxyCodeLine{00113\ \ \ \ \ \{}
\DoxyCodeLine{00114\ \ \ \ \ \ \ \ \ yield\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{new}\ WaitUntil(()\ =>\ Vector2.Distance(transform.localPosition,\ \mbox{\hyperlink{class_ragdoll_a2c2a578a2c3860da0c5cb072ae3ef2e4}{\_originLocalPosition}})\ <\ \mbox{\hyperlink{class_ragdoll_a0d117138c2f50150762b1b158b70715a}{\_rejoinAnchorDistanceThreshold}});}
\DoxyCodeLine{00115\ }
\DoxyCodeLine{00116\ \ \ \ \ \ \ \ \ transform.rotation\ =\ \mbox{\hyperlink{class_ragdoll_a29f73dbb34f22a17bb976a6ea49683a3}{\_initialRotation}};}
\DoxyCodeLine{00117\ \ \ \ \ \}}

\end{DoxyCode}
